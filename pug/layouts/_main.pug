doctype html
html(lang="en")
    head
        meta(charset="utf-8")
        meta(name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no")
        link(rel="apple-touch-icon" sizes="76x76" href="./img/apple-icon.png")
        link(rel="icon" type="image/png" href="./img/favicon.png")
        title Taxim
        // Fonts and icons
        link(href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet")
        link(href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet")
        // Nucleo Icons
        link(href="./css/nucleo-icons.css" rel="stylesheet")
        link(href="./css/nucleo-svg.css" rel="stylesheet")
        // Font Awesome Icons
        link(href="./css/font-awesome.css" rel="stylesheet")
        link(href="./css/nucleo-svg.css" rel="stylesheet")
        // CSS Files
        link(href="./css/argon-design-system.css?v=1.2.2" rel="stylesheet")
        script(type="module", src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs")
        script(src='https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.6/lottie.min.js')
        link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css")
        link(rel="stylesheet", href="./css/style.css")
    body.index-page
        // Navbar
        include ../components/_header
        .wrapper
            // Block content
            block content
            // Footer
            include ../components/_footer
        // Core JS Files
        script(src="./js/core/jquery.min.js" type="text/javascript")
        script(src="./js/core/popper.min.js" type="text/javascript")
        script(src="./js/core/bootstrap.min.js" type="text/javascript")
        script(src="./js/plugins/perfect-scrollbar.jquery.min.js")
        // Plugin for Switches
        script(src="./js/plugins/bootstrap-switch.js")
        // Plugin for the Sliders
        script(src="./js/plugins/nouislider.min.js" type="text/javascript")
        script(src="./js/plugins/moment.min.js")
        script(src="./js/plugins/datetimepicker.js" type="text/javascript")
        script(src="./js/plugins/bootstrap-datepicker.min.js")
        script(src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js")
        script.
            var animation = lottie.loadAnimation({
                container: document.getElementById('lottie-container'), 
                renderer: 'svg',
                loop: false,
                autoplay: true,
                path: './img/taxim.json'
            });

            // Esperar a que la animación se cargue
            animation.addEventListener('DOMLoaded', function() {
                // Obtener información sobre la animación
                var totalFrames = animation.totalFrames;
                var fps = animation.frameRate;
                var duration = animation.getDuration();
                
                // Configurar frames para el ping-pong
                var startFrame = Math.floor(fps * 5); // Frame para segundo 5
                var endFrame = Math.floor(fps * 10);   // Frame para segundo 10
                var isReversed = false;
                
                // Configurar velocidad inicial
                animation.setSpeed(0.5);
                
                // Función para reproducir en modo ping-pong
                function playPingPong() {
                    if (!isReversed) {
                        animation.setDirection(1);  // Dirección normal
                        animation.playSegments([startFrame, endFrame], true);
                    } else {
                        animation.setDirection(-1); // Dirección inversa
                        animation.playSegments([endFrame, startFrame], true);
                    }
                    isReversed = !isReversed;
                }
                
                // Cuando termine la primera reproducción
                animation.addEventListener('complete', function() {
                    playPingPong(); // Iniciar el ping-pong
                });
                
                // Escuchar cuando termina cada segmento
                animation.addEventListener('loopComplete', function() {
                    playPingPong(); // Reproducir el siguiente segmento
                });
            });

            // Inicializar Swiper
            const swiperInstagram = new Swiper('#swiperInstagramMovile', {
                slidesPerView: 1.6,
                centeredSlides: true,
                spaceBetween: 20,
                loop: true,
                speed: 600,
                autoplay: {
                    delay: 3000,
                    disableOnInteraction: false
                },
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true
                },
                breakpoints: {
                    576: {
                        slidesPerView: 1.8
                    }
                }
            });
        script.
            function scrollToDownload() {
                if ($(".section-download").length != 0) {
                $("html, body").animate(
                    {
                    scrollTop: $(".section-download").offset().top,
                    },
                    1000
                );
                }
            }